_type: export
__export_format: 4
__export_date: 2025-09-23T10:10:00.000Z
__export_source: insomnia.desktop.app:v11.4.0

resources:
  # ===================== Workspace =====================
  - _id: wrk_68f2907246df440f96e2f024b4a89fee
    parentId: null
    modified: 1754511487081
    created: 1754511487081
    name: Obsinity API Collection
    description: >
      Obsinity reference service (HTTP only) with publish_event (single/homogeneous batch),
      Search API examples, and Catalog helpers. Bodies follow Obsinity/OTEL-style nested JSON
      (resource, trace, time, attributes.http.status_code, attributes.obsinity.correlation_id).
    scope: collection
    _type: workspace

  # ===================== Environment =====================
  - _id: env_48ee75400dc54513958ace253d876e61
    parentId: wrk_68f2907246df440f96e2f024b4a89fee
    modified: 1754639228167
    created: 1753721379025
    name: Base Environment
    data:
      base_url: http://localhost:8086

      # Service/Resource defaults
      service_id: payments
      service_namespace: core
      service_instance_id: local-1
      service_version: 1.0.0
      host_name: devhost
      sdk_name: obsinity-java-sdk
      sdk_version: 0.1.0
      cloud_provider: local
      cloud_region: local-dev

      # Event defaults
      event_name: http_request
      api_name_checkout: checkout
      api_name_payments: payments

      # Config defaults
      config_snapshot_id: local-snapshot
      config_metric_name: request_latency
      config_metric_unit: milliseconds

      # Dynamic helpers
      nowIso: "{% now 'iso-8601', 'utc' %}"
      correlation_id: "{% uuid 'v4' %}"
      trace_id: "{% uuid 'v4' %}"
      span_id: "{% uuid 'v4' %}"
      span_id_2: "{% uuid 'v4' %}"
      span_id_error: "{% uuid 'v4' %}"
      event_id: "{% uuid 'v4' %}"
      event_id_1: "{% uuid 'v4' %}"
      event_id_2: "{% uuid 'v4' %}"
      event_id_error: "{% uuid 'v4' %}"
    _type: environment

  # ===================== Cookie Jar =====================
  - _id: jar_a149c3669a9047f3aef00b245c81d669
    parentId: wrk_68f2907246df440f96e2f024b4a89fee
    created: 1753721379030
    modified: 1753721379030
    name: Default Jar
    cookies: []
    _type: cookie_jar

  # ===================== Request Groups (flat) =====================
  - _id: fld_publish
    parentId: wrk_68f2907246df440f96e2f024b4a89fee
    created: 1754511488000
    modified: 1754511488000
    name: Publish
    _type: request_group

  - _id: fld_search
    parentId: wrk_68f2907246df440f96e2f024b4a89fee
    created: 1754511488001
    modified: 1754511488001
    name: Search
    _type: request_group

  - _id: fld_catalog
    parentId: wrk_68f2907246df440f96e2f024b4a89fee
    created: 1754511488002
    modified: 1754511488002
    name: Catalog
    _type: request_group

  - _id: fld_objql
    parentId: wrk_68f2907246df440f96e2f024b4a89fee
    created: 1754511488004
    modified: 1754511488004
    name: OBJQL
    _type: request_group

  - _id: fld_counters
    parentId: wrk_68f2907246df440f96e2f024b4a89fee
    created: 1754511488006
    modified: 1754511488006
    name: Counters
    _type: request_group

  - _id: fld_histograms
    parentId: wrk_68f2907246df440f96e2f024b4a89fee
    created: 1756720000000
    modified: 1756720000000
    name: Histograms
    _type: request_group

  - _id: fld_demo
    parentId: wrk_68f2907246df440f96e2f024b4a89fee
    created: 1756720100000
    modified: 1756720100000
    name: Demo Data
    _type: request_group

  # ===================== Demo Requests =====================
  - _id: req_demo_unified_events
    parentId: fld_demo
    created: 1757433600000
    modified: 1757433600000
    name: Generate Unified Demo Events
    method: POST
    url: "{{ base_url }}/internal/demo/generate-unified-events"
    headers:
      - name: Content-Type
        value: application/json
      - name: Accept
        value: application/json
    body:
      mimeType: application/json
      text: |-
        {
          "serviceKey": "payments",
          "eventType": "user_profile.updated",
          "events": 200,
          "profilePool": 40,
          "statuses": ["NEW", "ACTIVE", "SUSPENDED", "ACTIVE", "BLOCKED", "UPGRADED", "ARCHIVED"],
          "channels": ["web", "mobile", "partner"],
          "regions": ["us-east", "us-west", "eu-central"],
          "tiers": ["FREE", "PLUS", "PRO"],
          "maxDurationMillis": 1500,
          "recentWindowSeconds": 3600
        }
    _type: request

  - _id: fld_state_query
    parentId: wrk_68f2907246df440f96e2f024b4a89fee
    created: 1758900700000
    modified: 1758900700000
    name: State Queries
    description: Query interfaces for object_state counts/transitions.
    _type: request_group

  - _id: fld_admin
    parentId: wrk_68f2907246df440f96e2f024b4a89fee
    created: 1754511488005
    modified: 1754511488005
    name: Admin
    _type: request_group

  - _id: fld_system
    parentId: wrk_68f2907246df440f96e2f024b4a89fee
    created: 1754511488003
    modified: 1754511488003
    name: System
    _type: request_group

  # ===================== Publish =====================
  - _id: req_publish_event_ok
    parentId: fld_publish
    created: 1754511489000
    modified: 1754511489000
    name: publish_event (OK - body routed)
    description: Publish a single event using environment defaults.
    method: POST
    url: "{{ base_url }}/events/publish"
    body:
      mimeType: application/json
      text: |
        {
          "resource": {
            "service": {
              "name": "{{ service_id }}",
              "namespace": "{{ service_namespace }}",
              "instance": { "id": "{{ service_instance_id }}" },
              "version": "{{ service_version }}"
            }
          },
          "event": { "name": "{{ event_name }}" },
          "time": {
            "startedAt": "{% now 'iso-8601', 'utc', -1 %}",
            "endedAt": "{% now 'iso-8601', 'utc' %}"
          },
          "attributes": {
            "example": "value"
          }
        }
    headers:
      - name: Content-Type
        value: application/json
    _type: request

  - _id: req_publish_event_batch
    parentId: fld_publish
    created: 1754511489002
    modified: 1754511489002
    name: publish_event (BATCH homogeneous - body routed)
    description: Publish a homogeneous batch for the event in the URI.
    method: POST
    url: "{{ base_url }}/events/publish/batch"
    body:
      mimeType: application/json
      text: |
        [
          {
            "resource": {
              "service": { "name": "{{ service_id }}" }
            },
            "event": { "name": "{{ event_name }}" },
            "attributes": {
              "http": { "method": "GET", "status": 200 },
              "api": { "name": "lookupUser" }
            }
          },
          {
            "resource": {
              "service": { "name": "{{ service_id }}" }
            },
            "event": { "name": "{{ event_name }}" },
            "attributes": {
              "http": { "method": "POST", "status": 201 },
              "api": { "name": "lookupUser" }
            }
          }
        ]
    headers:
      - name: Content-Type
        value: application/json
    _type: request

  # ===================== Demo Data =====================
  - _id: req_demo_state_cascade
    parentId: fld_demo
    created: 1758900600000
    modified: 1758900600000
    name: demo → enqueue state cascade
    description: Trigger the internal state cascade generator (defaults to 250 profiles).
    method: POST
    url: "{{ base_url }}/internal/demo/state-cascade"
    body:
      mimeType: application/json
      text: |
        {
          "profiles": 100,
          "states": ["ACTIVE", "INACTIVE", "BLOCKED", "SUSPENDED", "ARCHIVED"],
          "totalDurationMinutes": 10,
          "transitionsPerProfile": 5
        }
    headers:
      - name: Content-Type
        value: application/json
    _type: request

  # ===================== State Queries =====================
  - _id: req_state_transition_query
    parentId: fld_state_query
    created: 1758900700100
    modified: 1758900700100
    name: query → state transitions
    description: Query state transition counts over time (requires controller REST module).
    method: POST
    url: "{{ base_url }}/api/query/state-transitions"
    body:
      mimeType: application/json
      text: |
        {
          "serviceKey": "{{ service_id }}",
          "objectType": "UserProfile",
          "attribute": "user.status",
          "fromStates": ["ACTIVE"],
          "toStates": ["BLOCKED"],
          "interval": "5s",
          "start": "{% now 'iso-8601', 'utc', -60 %}",
          "end": "{% now 'iso-8601', 'utc' %}",
          "limits": { "offset": 0, "limit": 20 }
        }
    headers:
      - name: Content-Type
        value: application/json
    _type: request

  - _id: req_state_counts_query
    parentId: fld_state_query
    created: 1758900700200
    modified: 1758900700200
    name: query → state counts
    description: Query current object_state counts by attribute/value.
    method: POST
    url: "{{ base_url }}/api/query/state-counts"
    body:
      mimeType: application/json
      text: |
        {
          "serviceKey": "{{ service_id }}",
          "objectType": "UserProfile",
          "attribute": "user.status",
          "states": ["ACTIVE", "BLOCKED", "ARCHIVED"],
          "limits": { "offset": 0, "limit": 20 }
        }
    headers:
      - name: Content-Type
        value: application/json
    _type: request

  - _id: req_publish_payments_http
    parentId: fld_publish
    created: 1754639740000
    modified: 1754639740000
    name: publish_event payments/http_request
    description: Publish a payments http_request event.
    method: POST
    url: "{{ base_url }}/events/publish"
    body:
      mimeType: application/json
      text: |
        {
          "resource": {
            "service": { "name": "payments" },
            "attributes": { "environment": "demo" }
          },
          "event": { "name": "http_request" },
          "time": {
            "startedAt": "{% now 'iso-8601', 'utc', -5 %}",
            "endedAt": "{% now 'iso-8601', 'utc' %}"
          },
          "attributes": {
            "api": { "name": "checkout", "version": "v1" },
            "http": { "method": "GET", "status": 200, "route": "/api/checkout" }
          }
        }
    headers:
      - name: Content-Type
        value: application/json
    _type: request

  - _id: req_publish_payments_auth
    parentId: fld_publish
    created: 1754639740100
    modified: 1754639740100
    name: publish_event payments/auth_decision
    description: Publish a payments auth_decision event.
    method: POST
    url: "{{ base_url }}/events/publish"
    body:
      mimeType: application/json
      text: |
        {
          "resource": { "service": { "name": "payments" } },
          "event": { "name": "auth_decision" },
          "attributes": {
            "auth": {
              "user_id": "user-123",
              "subject": "checkout",
              "decision": "ALLOW"
            }
          }
        }
    headers:
      - name: Content-Type
        value: application/json
    _type: request

  - _id: req_publish_reference_http
    parentId: fld_publish
    created: 1754639740200
    modified: 1754639740200
    name: publish_event obsinity-reference-service/http_request
    description: Publish a obsinity-reference-service http_request event.
    method: POST
    url: "{{ base_url }}/events/publish"
    body:
      mimeType: application/json
      text: |
        {
          "resource": {
            "service": { "name": "obsinity-reference-service" },
            "attributes": { "environment": "demo" }
          },
          "event": { "name": "http_request" },
          "time": {
            "startedAt": "{% now 'iso-8601', 'utc', -5 %}",
            "endedAt": "{% now 'iso-8601', 'utc' %}"
          },
          "attributes": {
            "api": { "name": "catalog", "version": "v1" },
            "http": { "method": "GET", "status": 200, "route": "/api/catalog/event-type" }
          }
        }
    headers:
      - name: Content-Type
        value: application/json
    _type: request

  - _id: req_publish_reference_auth
    parentId: fld_publish
    created: 1754639740300
    modified: 1754639740300
    name: publish_event obsinity-reference-service/auth_decision
    description: Publish a obsinity-reference-service auth_decision event.
    method: POST
    url: "{{ base_url }}/events/publish"
    body:
      mimeType: application/json
      text: |
        {
          "resource": { "service": { "name": "obsinity-reference-service" } },
          "event": { "name": "auth_decision" },
          "attributes": {
            "auth": {
              "user_id": "user-789",
              "subject": "catalog",
              "decision": "DENY"
            }
          }
        }
    headers:
      - name: Content-Type
        value: application/json
    _type: request

  - _id: req_publish_demo_checkout
    parentId: fld_publish
    created: 1754639740400
    modified: 1754639740400
    name: publish_event obsinity-demo-client/demo.checkout
    description: Publish a obsinity-demo-client demo.checkout event.
    method: POST
    url: "{{ base_url }}/events/publish"
    body:
      mimeType: application/json
      text: |
        {
          "resource": { "service": { "name": "obsinity-demo-client" } },
          "event": { "name": "demo.checkout" },
          "attributes": {
            "user": { "id": "alice" },
            "cart": { "size": 3 },
            "outcome": "SUCCESS"
          }
        }
    headers:
      - name: Content-Type
        value: application/json
    _type: request
  - _id: req_publish_demo_checkout_flat
    parentId: fld_publish
    created: 1754639740401
    modified: 1754639740401
    name: publish_event obsinity-demo-client/demo.checkout (flat)
    description: Publish a obsinity-demo-client demo.checkout event using dotted attributes.
    method: POST
    url: "{{ base_url }}/events/publish"
    body:
      mimeType: application/json
      text: |
        {
          "resource": { "service": { "name": "obsinity-demo-client" } },
          "event": { "name": "demo.checkout" },
          "attributes": {
            "user.id": "alice",
            "cart.size": 3,
            "outcome": "SUCCESS"
          }
        }
    headers:
      - name: Content-Type
        value: application/json
    _type: request


  - _id: req_publish_demo_client_call
    parentId: fld_publish
    created: 1754639740500
    modified: 1754639740500
    name: publish_event obsinity-demo-client/demo.client.call
    description: Publish a obsinity-demo-client demo.client.call event.
    method: POST
    url: "{{ base_url }}/events/publish"
    body:
      mimeType: application/json
      text: |
        {
          "resource": { "service": { "name": "obsinity-demo-client" } },
          "event": { "name": "demo.client.call" },
          "attributes": {
            "client": { "target": "service-x" },
            "outcome": "SUCCESS"
          }
        }
    headers:
      - name: Content-Type
        value: application/json
    _type: request
  - _id: req_publish_demo_client_call_flat
    parentId: fld_publish
    created: 1754639740501
    modified: 1754639740501
    name: publish_event obsinity-demo-client/demo.client.call (flat)
    description: Publish a obsinity-demo-client demo.client.call event using dotted attributes.
    method: POST
    url: "{{ base_url }}/events/publish"
    body:
      mimeType: application/json
      text: |
        {
          "resource": { "service": { "name": "obsinity-demo-client" } },
          "event": { "name": "demo.client.call" },
          "attributes": {
            "client.target": "service-x",
            "outcome": "SUCCESS"
          }
        }
    headers:
      - name: Content-Type
        value: application/json
    _type: request


  - _id: req_publish_demo_produce
    parentId: fld_publish
    created: 1754639740600
    modified: 1754639740600
    name: publish_event obsinity-demo-client/demo.produce
    description: Publish a obsinity-demo-client demo.produce event.
    method: POST
    url: "{{ base_url }}/events/publish"
    body:
      mimeType: application/json
      text: |
        {
          "resource": { "service": { "name": "obsinity-demo-client" } },
          "event": { "name": "demo.produce" },
          "attributes": {
            "messaging": { "topic": "demo-topic" },
            "outcome": "SUCCESS"
          }
        }
    headers:
      - name: Content-Type
        value: application/json
    _type: request
  - _id: req_publish_demo_produce_flat
    parentId: fld_publish
    created: 1754639740601
    modified: 1754639740601
    name: publish_event obsinity-demo-client/demo.produce (flat)
    description: Publish a obsinity-demo-client demo.produce event using dotted attributes.
    method: POST
    url: "{{ base_url }}/events/publish"
    body:
      mimeType: application/json
      text: |
        {
          "resource": { "service": { "name": "obsinity-demo-client" } },
          "event": { "name": "demo.produce" },
          "attributes": {
            "messaging.topic": "demo-topic",
            "outcome": "SUCCESS"
          }
        }
    headers:
      - name: Content-Type
        value: application/json
    _type: request


  - _id: req_publish_demo_orphan_step
    parentId: fld_publish
    created: 1754639740700
    modified: 1754639740700
    name: publish_event obsinity-demo-client/demo.orphan.step
    description: Publish a obsinity-demo-client demo.orphan.step event.
    method: POST
    url: "{{ base_url }}/events/publish"
    body:
      mimeType: application/json
      text: |
        {
          "resource": { "service": { "name": "obsinity-demo-client" } },
          "event": { "name": "demo.orphan.step" },
          "attributes": {
            "note": "compensating step",
            "outcome": "SUCCESS"
          }
        }
    headers:
      - name: Content-Type
        value: application/json
    _type: request
  - _id: req_publish_demo_orphan_step_flat
    parentId: fld_publish
    created: 1754639740701
    modified: 1754639740701
    name: publish_event obsinity-demo-client/demo.orphan.step (flat)
    description: Publish a obsinity-demo-client demo.orphan.step event using dotted attributes.
    method: POST
    url: "{{ base_url }}/events/publish"
    body:
      mimeType: application/json
      text: |
        {
          "resource": { "service": { "name": "obsinity-demo-client" } },
          "event": { "name": "demo.orphan.step" },
          "attributes": {
            "note": "compensating step",
            "outcome": "SUCCESS"
          }
        }
    headers:
      - name: Content-Type
        value: application/json
    _type: request


  - _id: req_publish_demo_orphan_fail
    parentId: fld_publish
    created: 1754639740800
    modified: 1754639740800
    name: publish_event obsinity-demo-client/demo.orphan.fail
    description: Publish a obsinity-demo-client demo.orphan.fail event.
    method: POST
    url: "{{ base_url }}/events/publish"
    body:
      mimeType: application/json
      text: |
        {
          "resource": { "service": { "name": "obsinity-demo-client" } },
          "event": { "name": "demo.orphan.fail" },
          "attributes": {
            "reason": "timeout",
            "outcome": "FAIL"
          }
        }
    headers:
      - name: Content-Type
        value: application/json
    _type: request
  - _id: req_publish_demo_orphan_fail_flat
    parentId: fld_publish
    created: 1754639740801
    modified: 1754639740801
    name: publish_event obsinity-demo-client/demo.orphan.fail (flat)
    description: Publish a obsinity-demo-client demo.orphan.fail event using dotted attributes.
    method: POST
    url: "{{ base_url }}/events/publish"
    body:
      mimeType: application/json
      text: |
        {
          "resource": { "service": { "name": "obsinity-demo-client" } },
          "event": { "name": "demo.orphan.fail" },
          "attributes": {
            "reason": "timeout",
            "outcome": "FAIL"
          }
        }
    headers:
      - name: Content-Type
        value: application/json
    _type: request


  - _id: req_publish_demo_reserve
    parentId: fld_publish
    created: 1754639740900
    modified: 1754639740900
    name: publish_event obsinity-demo-client/demo.reserve
    description: Publish a obsinity-demo-client demo.reserve event.
    method: POST
    url: "{{ base_url }}/events/publish"
    body:
      mimeType: application/json
      text: |
        {
          "resource": { "service": { "name": "obsinity-demo-client" } },
          "event": { "name": "demo.reserve" },
          "attributes": {
            "sku": "sku-123",
            "outcome": "SUCCESS"
          }
        }
    headers:
      - name: Content-Type
        value: application/json
    _type: request
  - _id: req_publish_demo_reserve_flat
    parentId: fld_publish
    created: 1754639740901
    modified: 1754639740901
    name: publish_event obsinity-demo-client/demo.reserve (flat)
    description: Publish a obsinity-demo-client demo.reserve event using dotted attributes.
    method: POST
    url: "{{ base_url }}/events/publish"
    body:
      mimeType: application/json
      text: |
        {
          "resource": { "service": { "name": "obsinity-demo-client" } },
          "event": { "name": "demo.reserve" },
          "attributes": {
            "sku": "sku-123",
            "outcome": "SUCCESS"
          }
        }
    headers:
      - name: Content-Type
        value: application/json
    _type: request


  - _id: req_publish_demo_reserve_stock
    parentId: fld_publish
    created: 1754639741000
    modified: 1754639741000
    name: publish_event obsinity-demo-client/demo.reserve.stock
    description: Publish a obsinity-demo-client demo.reserve.stock event.
    method: POST
    url: "{{ base_url }}/events/publish"
    body:
      mimeType: application/json
      text: |
        {
          "resource": { "service": { "name": "obsinity-demo-client" } },
          "event": { "name": "demo.reserve.stock" },
          "attributes": {
            "sku": "sku-123",
            "outcome": "SUCCESS"
          }
        }
    headers:
      - name: Content-Type
        value: application/json
    _type: request
  - _id: req_publish_demo_reserve_stock_flat
    parentId: fld_publish
    created: 1754639741001
    modified: 1754639741001
    name: publish_event obsinity-demo-client/demo.reserve.stock (flat)
    description: Publish a obsinity-demo-client demo.reserve.stock event using dotted attributes.
    method: POST
    url: "{{ base_url }}/events/publish"
    body:
      mimeType: application/json
      text: |
        {
          "resource": { "service": { "name": "obsinity-demo-client" } },
          "event": { "name": "demo.reserve.stock" },
          "attributes": {
            "sku": "sku-123",
            "outcome": "SUCCESS"
          }
        }
    headers:
      - name: Content-Type
        value: application/json
    _type: request


  - _id: req_publish_header_validation
    parentId: fld_publish
    created: 1754639741100
    modified: 1754639741100
    name: publish_event open-finance/header.validation
    description: Publish a header.validation event for open-finance-end-user-data-management.
    method: POST
    url: "{{ base_url }}/events/publish"
    body:
      mimeType: application/json
      text: |
        {
          "resource": { "service": { "name": "open-finance-end-user-data-management" } },
          "event": { "name": "header.validation" },
          "attributes": {
            "auth": {
              "consent": { "id": "consent-1" },
              "partner": {
                "id": "partner-42",
                "application": { "id": "app-7" }
              },
              "error": "NONE"
            }
          }
        }
    headers:
      - name: Content-Type
        value: application/json
    _type: request
  - _id: req_publish_header_validation_flat
    parentId: fld_publish
    created: 1754639741101
    modified: 1754639741101
    name: publish_event open-finance/header.validation (flat)
    description: Publish a header.validation event using dotted attributes.
    method: POST
    url: "{{ base_url }}/events/publish"
    body:
      mimeType: application/json
      text: |
        {
          "resource": { "service": { "name": "open-finance-end-user-data-management" } },
          "event": { "name": "header.validation" },
          "attributes": {
            "auth.consent.id": "consent-1",
            "auth.partner.id": "partner-42",
            "auth.partner.application.id": "app-7",
            "auth.error": "NONE"
          }
        }
    headers:
      - name: Content-Type
        value: application/json
    _type: request


  - _id: req_publish_payments_http_flat
    parentId: fld_publish
    created: 1754639740001
    modified: 1754639740001
    name: publish_event payments/http_request (flat)
    description: Publish a payments http_request event using dotted attributes.
    method: POST
    url: "{{ base_url }}/events/publish"
    body:
      mimeType: application/json
      text: |
        {
          "resource": {
            "service": { "name": "payments" },
            "attributes": { "environment": "demo" }
          },
          "event": { "name": "http_request" },
          "time": {
            "startedAt": "{% now 'iso-8601', 'utc', -5 %}",
            "endedAt": "{% now 'iso-8601', 'utc' %}"
          },
          "attributes": {
            "api.name": "checkout",
            "api.version": "v1",
            "http.method": "GET",
            "http.status": 200,
            "http.route": "/api/checkout"
          }
        }
    headers:
      - name: Content-Type
        value: application/json
    _type: request

  - _id: req_publish_payments_auth_flat
    parentId: fld_publish
    created: 1754639740101
    modified: 1754639740101
    name: publish_event payments/auth_decision (flat)
    description: Publish a payments auth_decision event using dotted attributes.
    method: POST
    url: "{{ base_url }}/events/publish"
    body:
      mimeType: application/json
      text: |
        {
          "resource": { "service": { "name": "payments" } },
          "event": { "name": "auth_decision" },
          "attributes": {
            "auth.user_id": "user-123",
            "auth.subject": "checkout",
            "auth.decision": "ALLOW"
          }
        }
    headers:
      - name: Content-Type
        value: application/json
    _type: request

  - _id: req_publish_reference_http_flat
    parentId: fld_publish
    created: 1754639740201
    modified: 1754639740201
    name: publish_event obsinity-reference-service/http_request (flat)
    description: Publish an obsinity-reference-service http_request event using dotted attributes.
    method: POST
    url: "{{ base_url }}/events/publish"
    body:
      mimeType: application/json
      text: |
        {
          "resource": {
            "service": { "name": "obsinity-reference-service" },
            "attributes": { "environment": "demo" }
          },
          "event": { "name": "http_request" },
          "time": {
            "startedAt": "{% now 'iso-8601', 'utc', -5 %}",
            "endedAt": "{% now 'iso-8601', 'utc' %}"
          },
          "attributes": {
            "api.name": "catalog",
            "api.version": "v1",
            "http.method": "GET",
            "http.status": 200,
            "http.route": "/api/catalog/event-type"
          }
        }
    headers:
      - name: Content-Type
        value: application/json
    _type: request

  - _id: req_publish_reference_auth_flat
    parentId: fld_publish
    created: 1754639740301
    modified: 1754639740301
    name: publish_event obsinity-reference-service/auth_decision (flat)
    description: Publish an obsinity-reference-service auth_decision event using dotted attributes.
    method: POST
    url: "{{ base_url }}/events/publish"
    body:
      mimeType: application/json
      text: |
        {
          "resource": { "service": { "name": "obsinity-reference-service" } },
          "event": { "name": "auth_decision" },
          "attributes": {
            "auth.user_id": "user-789",
            "auth.subject": "catalog",
            "auth.decision": "DENY"
          }
        }
    headers:
      - name: Content-Type
        value: application/json
    _type: request

  # ===================== Search =====================
  - _id: req_search_exact_and
    parentId: fld_search
    created: 1754511489100
    modified: 1754511489100
    name: Search - Exact match (AND)
    description: payments http_request where api.name and http.status_code match in last 1h
    method: POST
    url: "{{ base_url }}/api/search/events"
    body:
      mimeType: application/json
      text: |
        {
          "service": "{{ service_id }}",
          "event": "{{ event_name }}",
          "period": { "previous": "-1h" },
          "match": {
            "and": [
              { "attribute": "api.name",         "op": "=", "value": "getAccountHolders" },
              { "attribute": "http.status_code", "op": "=", "value": 200 }
            ]
          },
          "order": [{ "field": "started_at", "dir": "desc" }],
          "limit": 100,
          "offset": 0
        }
    headers:
      - name: Content-Type
        value: application/json
    _type: request

  - _id: req_search_ilike_prefix
    parentId: fld_search
    created: 1754511489101
    modified: 1754511489101
    name: Search - ILIKE prefix (AND)
    description: api.name ilike 'create%' in last 24h
    method: POST
    url: "{{ base_url }}/api/search/events"
    body:
      mimeType: application/json
      text: |
        {
          "service": "{{ service_id }}",
          "event": "{{ event_name }}",
          "period": { "previous": "-24h" },
          "match": {
            "and": [
              { "attribute": "api.name",    "op": "ilike", "value": "create%" },
              { "attribute": "http.method", "op": "=",     "value": "GET" }
            ]
          },
          "order": [{ "field": "started_at", "dir": "desc" }],
          "limit": 200
        }
    headers:
      - name: Content-Type
        value: application/json
    _type: request

  - _id: req_search_like_sub_ne
    parentId: fld_search
    created: 1754511489102
    modified: 1754511489102
    name: Search - LIKE substring + != (AND)
    description: LIKE '%account%' and status_code != 500 between time window
    method: POST
    url: "{{ base_url }}/api/search/events"
    body:
      mimeType: application/json
      text: |
        {
          "service": "{{ service_id }}",
          "event": "{{ event_name }}",
          "period": { "between": ["2025-09-15T00:00:00Z", "2025-09-15T06:00:00Z"] },
          "match": {
            "and": [
              { "attribute": "api.name",         "op": "like", "value": "%account%" },
              { "attribute": "http.status_code", "op": "!=",   "value": 500 }
            ]
          },
          "order": [{ "field": "started_at", "dir": "desc" }],
          "limit": 100
        }
    headers:
      - name: Content-Type
        value: application/json
    _type: request

  - _id: req_search_category
    parentId: fld_search
    created: 1754511489103
    modified: 1754511489103
    name: Search - Category filter (full-event)
    description: Filter by registry metadata event.subCategory (not in attributes)
    method: POST
    url: "{{ base_url }}/api/search/events"
    body:
      mimeType: application/json
      text: |
        {
          "service": "{{ service_id }}",
          "event": "{{ event_name }}",
          "period": { "previous": "-1h" },
          "filter": { "path": "event.subCategory", "op": "=", "value": "http.server" },
          "order": [{ "field": "started_at", "dir": "desc" }],
          "limit": 50
        }
    headers:
      - name: Content-Type
        value: application/json
    _type: request

  - _id: req_search_corr_id
    parentId: fld_search
    created: 1754511489104
    modified: 1754511489104
    name: Search - CorrelationId (filter)
    description: Filter by correlation id via attribute path (envelope projection)
    method: POST
    url: "{{ base_url }}/api/search/events"
    body:
      mimeType: application/json
      text: |
        {
          "service": "{{ service_id }}",
          "event": "{{ event_name }}",
          "period": { "previous": "-15m" },
          "filter": { "path": "attributes.obsinity.correlation_id", "op": "=", "value": "{{ correlation_id }}" },
          "order": [{ "field": "started_at", "dir": "desc" }],
          "limit": 25
        }
    headers:
      - name: Content-Type
        value: application/json
    _type: request

  - _id: req_search_pagination
    parentId: fld_search
    created: 1754511489105
    modified: 1754511489105
    name: Search - Pagination (page 2)
    description: Second page using offset
    method: POST
    url: "{{ base_url }}/api/search/events"
    body:
      mimeType: application/json
      text: |
        {
          "service": "{{ service_id }}",
          "event": "{{ event_name }}",
          "period": { "previous": "-1h" },
          "match": { "attribute": "http.status_code", "op": "=", "value": 200 },
          "order": [{ "field": "started_at", "dir": "desc" }],
          "limit": 25,
          "offset": 25
        }
    headers:
      - name: Content-Type
        value: application/json
    _type: request

  - _id: req_search_filter_or
    parentId: fld_search
    created: 1754511489106
    modified: 1754511489106
    name: Search - Filter OR (full-event)
    description: Full-event OR filter with ilike patterns
    method: POST
    url: "{{ base_url }}/api/search/events"
    body:
      mimeType: application/json
      text: |
        {
          "service": "{{ service_id }}",
          "event": "{{ event_name }}",
          "period": { "previous": "-24h" },
          "match": [
            { "attribute": "http.method", "op": "=", "value": "GET" }
          ],
          "filter": {
            "or": [
              { "path": "attributes.api.name", "op": "ilike", "value": "create%" },
              { "path": "attributes.api.name", "op": "ilike", "value": "update%" }
            ]
          },
          "order": [{ "field": "started_at", "dir": "desc" }],
          "limit": 100
        }
    headers:
      - name: Content-Type
        value: application/json
    _type: request

  - _id: req_search_filter_nested
    parentId: fld_search
    created: 1754511489107
    modified: 1754511489107
    name: Search - Filter Nested (AND/OR)
    description: Nested AND with inner OR on full-event paths
    method: POST
    url: "{{ base_url }}/api/search/events"
    body:
      mimeType: application/json
      text: |
        {
          "service": "{{ service_id }}",
          "event": "{{ event_name }}",
          "period": { "between": ["2025-09-15T00:00:00Z", "2025-09-15T06:00:00Z"] },
          "match": [
            { "attribute": "http.status_code", "op": "!=", "value": 500 }
          ],
          "filter": {
            "and": [
              { "path": "attributes.client.ip", "op": "!=", "value": "10.0.0.1" },
              { "or": [
                  { "path": "attributes.api.name", "op": "like",  "value": "%account%" },
                  { "path": "attributes.api.name", "op": "ilike", "value": "create%" }
                ]
              }
            ]
          },
          "order": [{ "field": "started_at", "dir": "desc" }],
          "limit": 100
        }
    headers:
      - name: Content-Type
        value: application/json
    _type: request

  - _id: req_search_match_or
    parentId: fld_search
    created: 1754511489108
    modified: 1754511489108
    name: Search - Match OR (indexed)
    description: Indexed OR over match conditions
    method: POST
    url: "{{ base_url }}/api/search/events"
    body:
      mimeType: application/json
      text: |
        {
          "service": "{{ service_id }}",
          "event": "{{ event_name }}",
          "period": { "previous": "-6h" },
          "match": {
            "or": [
              { "attribute": "http.status_code", "op": "=", "value": 200 },
              { "attribute": "http.status_code", "op": "=", "value": 201 }
            ]
          },
          "order": [{ "field": "started_at", "dir": "desc" }],
          "limit": 100
        }
    headers:
      - name: Content-Type
        value: application/json
    _type: request

  - _id: req_search_match_and_or
    parentId: fld_search
    created: 1754511489109
    modified: 1754511489109
    name: Search - Match AND with nested OR
    description: Indexed AND with inner OR over equality conditions
    method: POST
    url: "{{ base_url }}/api/search/events"
    body:
      mimeType: application/json
      text: |
        {
          "service": "{{ service_id }}",
          "event": "{{ event_name }}",
          "period": { "since": "-1h" },
          "match": {
            "and": [
              { "attribute": "api.name", "op": "=", "value": "getAccountHolders" },
              {
                "or": [
                  { "attribute": "http.status_code", "op": "=", "value": 200 },
                  { "attribute": "http.status_code", "op": "=", "value": 201 }
                ]
              }
            ]
          },
          "order": [ { "field": "started_at", "dir": "desc" } ],
          "limit": 100,
          "offset": 0
        }
    headers:
      - name: Content-Type
        value: application/json
    _type: request

  # ===================== OBJQL =====================
  - _id: req_objql_query_basic
    parentId: fld_objql
    created: 1754511489150
    modified: 1754511489150

  # ===================== Counters =====================
  - _id: req_counter_query_status_rollup
    parentId: fld_counters
    created: 1754639600000
    modified: 1754639600000
    name: Counters - HTTP status rollup (5m)
    description: Query the counter rollup API for HTTP status groups over the last hour.
    method: POST
    url: "{{ base_url }}/api/counters/query"
    body:
      mimeType: application/json
      text: |
        {
          "serviceKey": "{{ service_id }}",
          "eventType": "{{ event_name }}",
          "counterName": "http_requests_by_status",
          "interval": "5m",
          "key": {
            "http.method": ["GET"],
            "http.status": ["200", "500"]
          },
          "limits": {
            "offset": 0,
            "limit": 12
          }
        }
    headers:
      - name: Content-Type
        value: application/json
    _type: request

  # ===================== Histograms =====================
  - _id: req_histogram_query_latency
    parentId: fld_histograms
    created: 1756720000100
    modified: 1756720000100
    name: Histograms - HTTP latency (1m percentiles)
    description: Query the histogram API to retrieve latency percentiles over the last hour.
    method: POST
    url: "{{ base_url }}/api/histograms/query"
    body:
      mimeType: application/json
      text: |
        {
          "serviceKey": "{{ service_id }}",
          "eventType": "{{ event_name }}",
          "histogramName": "http_request_latency_ms",
          "interval": "1m",
          "start": "{% now 'iso-8601', 'utc', -60 %}",
          "end": "{% now 'iso-8601', 'utc' %}",
          "key": {
            "http.method": ["GET"],
            "http.route": ["/api/checkout"]
          },
          "percentiles": [0.5, 0.9, 0.95, 0.99],
          "limits": {
            "offset": 0,
            "limit": 60
          }
        }
    headers:
      - name: Content-Type
        value: application/json
    _type: request

  # ===================== Demo Data =====================
  - _id: req_demo_generate_latency
    parentId: fld_demo
    created: 1756720101000
    modified: 1756720101000
    name: Demo - Generate latency sample data
    description: Generate synthetic http_request events across the last 14 days for histogram testing.
    method: POST
    url: "{{ base_url }}/internal/demo/generate-latency"
    body:
      mimeType: application/json
      text: |
        {
          "serviceKey": "{{ service_id }}",
          "eventType": "{{ event_name }}",
          "httpMethod": "GET",
          "httpRoute": "/api/checkout",
          "statusCodes": ["200", "500"],
          "days": 14,
          "eventsPerDay": 5000
        }
    headers:
      - name: Content-Type
        value: application/json
    _type: request

  # ===================== Catalog =====================
  - _id: req_catalog_create_type
    parentId: fld_catalog
    created: 1754511489190
    modified: 1754511489190
    name: Catalog - Create event type
    description: Ensure an event type exists with an optional description.
    method: POST
    url: "{{ base_url }}/api/catalog/event-type/{{ event_name }}"
    body:
      mimeType: application/json
      text: |
        {
          "description": "Demo payments HTTP request event"
        }
    headers:
      - name: Content-Type
        value: application/json
    _type: request

  - _id: req_catalog_add_index
    parentId: fld_catalog
    created: 1754511489191
    modified: 1754511489191
    name: Catalog - Add attribute index path
    description: Register an indexed attribute path for the event type.
    method: POST
    url: "{{ base_url }}/api/catalog/event-type/{{ event_name }}/index"
    body:
      mimeType: application/json
      text: |
        {
          "path": "api.name"
        }
    headers:
      - name: Content-Type
        value: application/json
    _type: request

  - _id: req_catalog_list_types
    parentId: fld_catalog
    created: 1754511489192
    modified: 1754511489192
    name: Catalog - List event types
    description: List all registered event types for the service catalog.
    method: GET
    url: "{{ base_url }}/api/catalog/event-type"
    body: {}
    headers: []
    _type: request

  - _id: req_attr_values_api_name
    parentId: fld_catalog
    created: 1754511489200
    modified: 1754511489200
    name: Catalog - Attribute values (api.name)
    description: List distinct values for api.name under the service with optional prefix filter.
    method: GET
    url: "{{ base_url }}/api/catalog/attributes/{{ service_id }}/api.name/values?prefix=get&limit=25"
    body: {}
    headers: []
    _type: request

  - _id: req_attr_values_http_status
    parentId: fld_catalog
    created: 1754511489201
    modified: 1754511489201
    name: Catalog - Attribute values (http.status_code)
    description: List distinct values for http.status_code under the service.
    method: GET
    url: "{{ base_url }}/api/catalog/attributes/{{ service_id }}/http.status_code/values?limit=25"
    body: {}
    headers: []
    _type: request

  - _id: req_attr_names_all
    parentId: fld_catalog
    created: 1754511489202
    modified: 1754511489202
    name: Catalog - Attribute names (all)
    description: List distinct attribute names for the service.
    method: GET
    url: "{{ base_url }}/api/catalog/attributes/{{ service_id }}/names?limit=100"
    body: {}
    headers: []
    _type: request

  - _id: req_attr_names_prefix_http
    parentId: fld_catalog
    created: 1754511489203
    modified: 1754511489203
    name: Catalog - Attribute names (prefix http.)
    description: List attribute names with prefix filter.
    method: GET
    url: "{{ base_url }}/api/catalog/attributes/{{ service_id }}/names?prefix=http.&limit=100"
    body: {}
    headers: []
    _type: request

  # ===================== Admin =====================
  - _id: req_admin_ready
    parentId: fld_admin
    created: 1754511489250
    modified: 1754511489250
    name: Admin - Ready probe
    description: Ping the admin config surface (returns plain text OK).
    method: GET
    url: "{{ base_url }}/api/admin/config/ready"
    body: {}
    headers: []
    _type: request

  - _id: req_admin_config_service
    parentId: fld_admin
    created: 1754511489251
    modified: 1754511489251
    name: Admin - Ingest service config (JSON)
    description: Upload a full service configuration snapshot as JSON.
    method: POST
    url: "{{ base_url }}/api/admin/config/service"
    body:
      mimeType: application/json
      text: |
        {
          "service": "{{ service_id }}",
          "snapshotId": "{{ config_snapshot_id }}",
          "createdAt": "{{ nowIso }}",
          "defaults": {
            "rollups": ["1m", "5m"],
            "backfillWindow": "7d"
          },
          "events": [
            {
              "uuid": "{{ event_id }}",
              "eventName": "{{ event_name }}",
              "category": "payments",
              "metrics": [
                {
                  "uuid": "{{ event_id_1 }}",
                  "name": "{{ config_metric_name }}",
                  "type": "HISTOGRAM",
                  "specJson": {
                    "unit": "{{ config_metric_unit }}",
                    "buckets": [50, 100, 250, 500]
                  },
                  "rollups": ["p50", "p95"],
                  "backfillWindow": "7d"
                }
              ],
              "attributeIndex": {
                "uuid": "{{ event_id_2 }}",
                "specJson": {
                  "indexed": ["api.name", "http.status_code"]
                }
              }
            }
          ]
        }
    headers:
      - name: Content-Type
        value: application/json
    _type: request

  - _id: req_admin_config_import
    parentId: fld_admin
    created: 1754511489252
    modified: 1754511489252
    name: Admin - Import service config archive
    description: Multipart upload of a `.tar.gz` bundle (services/<svc>/events/...). Attach a local archive file.
    method: POST
    url: "{{ base_url }}/api/admin/configs/import?mode=upsert"
    body:
      mimeType: multipart/form-data
      params:
        - id: pair_admin_import_file
          name: file
          type: file
          fileName: ./service-config.tar.gz
    headers: []
    _type: request

  # ===================== System =====================
  - _id: req_health
    parentId: fld_system
    created: 1754511489300
    modified: 1754511489300
    name: Health
    description: Spring Boot actuator health.
    method: GET
    url: "{{ base_url }}/actuator/health"
    body: {}
    headers: []
    _type: request
  - _id: req_counter_query_api_rollup
    parentId: fld_counters
    created: 1754639601000
    modified: 1754639601000
    name: Counters - HTTP API rollup (1m)
    description: Query the counter rollup API grouping by API name.
    method: POST
    url: "{{ base_url }}/api/counters/query"
    body:
      mimeType: application/json
      text: |
        {
          "serviceKey": "{{ service_id }}",
          "eventType": "{{ event_name }}",
          "counterName": "http_requests_by_api",
          "interval": "1m",
          "start": "{% now 'iso-8601', 'utc', -3600 %}",
          "end": "{% now 'iso-8601', 'utc' %}",
          "key": {
            "api.name": ["{{ api_name_checkout }}", "{{ api_name_payments }}"],
            "http.method": ["GET"]
          },
          "limits": {
            "offset": 0,
            "limit": 60
          }
        }
    headers:
      - name: Content-Type
        value: application/json
    _type: request
