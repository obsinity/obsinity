service: user-profile
ratioQueries:
  - name: funnel_outcomes
    type: ratio
    source: transitions
    objectType: UserProfile
    attribute: user.status
    window:
      from: -15m
      to: now
    items:
      - transition: "NEW->ACTIVE"
        label: "Success"
      - transition: "NEW->ABANDONED"
        label: "Failed"
      - transition: "NEW->INACTIVE"
        label: "Expired"
    output:
      format: grafana_pie
      value: count
      includeRaw: true
      includePercent: true
      includeRatio: true
      decimals: 2
    behavior:
      zeroTotal: zeros
      missingItem: zero
